include build/unix/Makefile.inc

CFLAGS  := -g0 -O2 -pipe -march=native
OBJ_DIR := $(OBJ_DIR)/$(TARGET)
OBJ     := $(patsubst $(SRC_DIR)/%.c,$(OBJ_DIR)/%.o,$(wildcard $(SRC_DIR)/*.c))

default: $(OBJ_DIR) $(OBJ_DIR)/../$(TARGET).a

%.a: $(OBJ)
	@echo Creating static $(TARGET) library...
	@ar rsc $@ $^

$(OBJ_DIR)/%.o: $(SRC_DIR)/%.c
	@echo Compiling $<
	@$(CC) -c $< $(CFLAGS) -o $@

$(OBJ_DIR):
	@mkdir -p $(OBJ_DIR)

clean:
	@rm -fr $(OBJ_DIR)
