OBJDIR := build/unix/$(TARGET)
SRCDIR := $(LIBSRC)

CC = gcc
CFLAGS = -g0 -O2 -pipe -march=native

OBJ = $(patsubst $(SRCDIR)/%.c,$(OBJDIR)/%.o,$(wildcard $(SRCDIR)/*.c))

default: check $(OBJDIR)/../$(TARGET).a

%.a: $(OBJ)
	@echo Creating static $(TARGET) library...
	@ar rsc $@ $^

$(OBJDIR)/%.o: $(SRCDIR)/%.c
	@echo Compiling $<
	@$(CC) -c $< $(CFLAGS) -o $@

check:
	@if [ ! -d $(OBJDIR) ]; then mkdir -p $(OBJDIR); fi

clean:
	@rm -fr $(OBJDIR)
